/*!
 * Fork by Zach Fitzgerald and other contributors of Ionic Material
 *
 * Waves v0.5.4
 * http://fian.my.id/Waves
 *
 * Copyright 2014 Alfiana E. Sibuea and other contributors
 *
 * Released under the MIT license
 * https://github.com/fians/Waves/blob/master/LICENSE
 *
 */
"use strict";module.exports=function(t){function e(){function t(t){return null!==t&&t===t.window}function e(e){return t(e)?e:9===e.nodeType&&e.defaultView}function n(t){var n,a,r={top:0,left:0},i=t&&t.ownerDocument;return n=i.documentElement,"undefined"!=typeof t.getBoundingClientRect&&(r=t.getBoundingClientRect()),a=e(i),{top:r.top+a.pageYOffset-n.clientTop,left:r.left+a.pageXOffset-n.clientLeft}}function a(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function r(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e+=n+":"+t[n]+";");return e}var i,o=o||{};if(document&&document.querySelectorAll&&document.querySelectorAll.bind)try{i=document.querySelectorAll.bind(document)}catch(t){}else if(window&&window.angular&&window.angular.element)i=window.angular.element;else{var u=function(t,e,n){var a=t.length;e=null==e?0:e<0?Math.max(a+e,0):Math.min(e,a),n=null==n?a:n<0?Math.max(a+n,0):Math.min(n,a);for(var r=[];e<n;)r.push(t[e++]);return r},s=function(t,e,n){var a=u(arguments,2);return function(){return t.apply(e,a.concat(u(arguments)))}};i=s(document.querySelectorAll,document)}if(!i)throw new Error("ionic material ink module could not create reference of DOM nodes");var d={duration:500,show:function(t){if(2===t.button)return!1;var e=this,i=document.createElement("div"),o=this.dataset.inkColor,u=this.dataset.inkOpacity,s=o||u;i.className="ink-ripple",e.appendChild(i);var l=n(e),c=t.pageY-l.top,m=t.pageX-l.left,f="scale("+e.clientWidth/100*2.5+")";"touches"in t&&(c=t.touches[0].pageY-l.top,m=t.touches[0].pageX-l.left),i.setAttribute("data-hold",Date.now()),i.setAttribute("data-scale",f),i.setAttribute("data-x",m),i.setAttribute("data-y",c);var p={top:c+"px",left:m+"px"};if(i.className=i.className+" ink-notransition",s){var h;if(o){var b=a(o);h=b.r+","+b.g+","+b.b}else h="0,0,0";u||(u=.2);var v="rgba("+h+","+u+")";p["background-color"]=v}i.setAttribute("style",r(p)),i.className=i.className.replace("ink-notransition",""),p["-webkit-transform"]=f,p["-moz-transform"]=f,p["-ms-transform"]=f,p["-o-transform"]=f,p.transform=f,p.opacity="1",p["-webkit-transition-duration"]=d.duration+"ms",p["-moz-transition-duration"]=d.duration+"ms",p["-o-transition-duration"]=d.duration+"ms",p["transition-duration"]=d.duration+"ms",i.setAttribute("style",r(p))},hide:function(){for(var t=this,e=(1.4*t.clientWidth,null),n=t.children.length,a=0;a<n;a++)t.children[a].className.indexOf("ink-ripple")===-1||(e=t.children[a]);if(!e)return!1;var i=e.getAttribute("data-x"),o=e.getAttribute("data-y"),u=e.getAttribute("data-scale"),s=Date.now()-Number(e.getAttribute("data-hold")),l=500-s;l<0&&(l=0),setTimeout(function(){var n={top:o+"px",left:i+"px",opacity:"0","-webkit-transition-duration":d.duration+"ms","-moz-transition-duration":d.duration+"ms","-o-transition-duration":d.duration+"ms","transition-duration":d.duration+"ms","-webkit-transform":u,"-moz-transform":u,"-ms-transform":u,"-o-transform":u,transform:u};e.setAttribute("style",r(n)),setTimeout(function(){try{t.removeChild(e)}catch(t){return!1}},d.duration)},l)},wrapInput:function(t){for(var e=0;e<t.length;e++){var n=t[e];if("input"===n.tagName.toLowerCase()){var a=n.parentNode;if("i"===a.tagName.toLowerCase()&&a.className.indexOf("ink")!==-1&&a.className.indexOf("tab-item")!==-1&&a.className.indexOf("button-fab")!==-1&&a.className.indexOf("button-raised")!==-1&&a.className.indexOf("button-flat")!==-1&&a.className.indexOf("button-clear")!==-1&&a.className.indexOf("button")!==-1&&a.className.indexOf("item")!==-1)return!1;var r=document.createElement("i");r.className=n.className+" ink-input-wrapper";var i=n.getAttribute("style");i||(i=""),r.setAttribute("style",i),n.className="ink-button-input",n.removeAttribute("style"),a.replaceChild(r,n),r.appendChild(n)}}}};return o.displayEffect=function(t){t=t||{},"duration"in t&&(d.duration=t.duration);var e=".ink,.tab-item,.button-fab,.button-raised,.button-flat,.button-clear,a.item,.popup .button";d.wrapInput(i(e)),Array.prototype.forEach.call(i(e),function(t){"ontouchstart"in window?(t.addEventListener("touchstart",d.show,!1),t.addEventListener("touchend",d.hide,!1),t.addEventListener("touchcancel",d.hide,!1)):(t.addEventListener("mousedown",d.show,!1),t.addEventListener("mouseup",d.hide,!1),t.addEventListener("mouseleave",d.hide,!1))})},o}t.factory("ionicMaterialInk",e),e.inject=[]};